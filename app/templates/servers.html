{% extends 'base.html' %}
{% block content %}
<h2>Servers</h2>
<form method="post">
    <input name="ip_address" placeholder="IP Address" required>
    <input name="name" placeholder="Server Name" required>
    <input name="os" placeholder="OS" required>
    <input name="os_type" placeholder="OS Type" required>
    <input name="tag" placeholder="Tag">
    <button type="submit">Add Server</button>
</form>
<table>
    <tr><th>Name</th><th>IP</th><th>OS</th><th>CVE</th><th>Actions</th></tr>
    {% for s in servers %}
    <tr>
        <td>{{ s.name }}</td>
        <td>{{ s.ip_address }}</td>
        <td>{{ s.os }}</td>
        <td>{{ s.cve or 'None' }}</td>
        <td>
            <a href="{{ url_for('main.scan', server_id=s.id) }}">Scan</a>
            <form action="{{ url_for('main.remediate', server_id=s.id) }}" method="post" style="display:inline">
                <select name="action">
                    <option>Test Remediation</option>
                    <option>Remediate Now</option>
                    <option>Native Remediation</option>
                </select>
                <button type="submit">Go</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
